<mat-card>

  <div class="mat-elevation-z8">
    <mat-toolbar class="home-table-css" style="color: #FFFFFF; background: #EA3323;">
      <mat-toolbar-row>
        <div style="display: inline-block; width: 100%;">
          <span style="float: left;">Add Donor</span>
          <button mat-flat-button color="primary" (click)="openFilter()" style="float: right;">Search
            Donor</button>
          <mat-spinner style="float: left;" *ngIf="IsWait2" color="primary" diameter="50"></mat-spinner>

        </div>
      </mat-toolbar-row>
    </mat-toolbar>
    <form class="home-form" [formGroup]="formSubmission" (ngSubmit)="onSubmit()">

      <mat-card-content>
        <div class="container">

          <div class="row" style="background: cornsilk;">
            <div class="col-sm-6" style="margin-top: 5px;">
              <label class="home-label-css">Computer : </label>
              <!-- <p class="home-label-css" name="DonorDetailID" formControlName="DonorDetailID" style="margin-left: 10px;" ></p> -->
              <mat-form-field style="margin-left: 10px;">
                <input type="text" name="DonnerDetailID" 
                 formControlName="DonnerDetailID" matInput >

              </mat-form-field>
            </div>
            <div class="col-sm-6" style="margin-top: 5px;">
              <label class="home-label-css">Code : </label>
              <mat-form-field style="margin-left: 10px;">
                <!-- <input oninput="this.value = this.value.toUpperCase()" name="SrNo" formControlName="SrNo" matInput
                  value=""> -->
                 
                    <!-- <input oninput="this.value = this.value.toUpperCase()" name="SrNo" (change) = "onType('SrNo')" formControlName="SrNo" matInput placeholder="SrNo" value="" >
                  -->

                  <input oninput="this.value = this.value.toUpperCase()"  formControlName="SrNo"  matInput [matAutocomplete]="autoSrNo">
                  <mat-autocomplete #autoSrNo="matAutocomplete">
                    <mat-option *ngFor="let srNo of filteredOptionsSrNo | async"  [value]="srNo">
                      {{srNo}}
                    </mat-option>
                  </mat-autocomplete>
                <mat-error *ngIf="formSubmission.controls['SrNo'].errors?.required">
                  Sr No is <strong>required</strong>
                </mat-error>
              </mat-form-field>
            </div>
          </div>

          <div class="row" style="margin-top: 10px;">
            <div class="col-sm-12">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" name="Company" id="cmp" formControlName="Company"
                  matInput placeholder="Company" value="">
                <!-- <mat-error
                *ngIf="formSubmission.controls['FirstName'].invalid && (formSubmission.controls['FirstName'].dirty
                                                                              || formSubmission.controls['FirstName'].touched)">
                Please enter First Name.
              </mat-error>
              <mat-error *ngIf="formSubmission.controls['FirstName'].errors?.required">
                First Name is <strong>required</strong>
              </mat-error> -->
              </mat-form-field>
            </div>
          </div>
          <div class="row" style="margin-top: 10px;">
            <div class="col-sm-3">
              <mat-form-field class="home-full-width">
                <mat-label>Prefix</mat-label>
                <mat-select formControlName="Title">
                  <mat-option *ngFor="let name of NamePrefix" [value]="name">
                    {{name}}
                  </mat-option>
                </mat-select>
                <!-- 
                <input oninput="this.value = this.value.toUpperCase()" formControlName="NamePrefix" placeholder="Prefix" matInput [matAutocomplete]="autoNamePrefix">
                <mat-autocomplete #autoNamePrefix="matAutocomplete">
                  <mat-option *ngFor="let name of NamePrefix" [value]="name">
                    {{name}}
                  </mat-option>
                </mat-autocomplete> -->
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" name="FirstName" id="fn"
                  formControlName="FirstName" matInput placeholder="Name" value="">
                <!-- <mat-error
                *ngIf="formSubmission.controls['FirstName'].invalid && (formSubmission.controls['FirstName'].dirty
                                                                              || formSubmission.controls['FirstName'].touched)">
                Please enter First Name.
              </mat-error>
              <mat-error *ngIf="formSubmission.controls['FirstName'].errors?.required">
                First Name is <strong>required</strong>
              </mat-error> -->
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" name="MiddleName" formControlName="MiddleName"
                  matInput placeholder="Middle Name" value="">
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" name="Surname" formControlName="Surname" matInput
                  placeholder="Surname" value="">
                <!-- <mat-error *ngIf="formSubmission.controls['Surname'].invalid && (formSubmission.controls['Surname'].dirty
                                                                               || formSubmission.controls['Surname'].touched)">
                Please enter Surname.
              </mat-error>
              <mat-error *ngIf="formSubmission.controls['Surname'].errors?.required">
                Surname is <strong>required</strong>
              </mat-error> -->
              </mat-form-field>
            </div>

          </div>

          <div class="row">
            <div class="col-sm-6">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" name="HouseNoName" formControlName="HouseNoName" matInput placeholder="House Name/ Number"
                  value="" (change) = "onType('HouseNoName')">
              </mat-form-field>
            </div>
            <div class="col-sm-6">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" name="SocBuildingName" formControlName="SocBuildingName" matInput placeholder="Soc./Bld Name"
                  value="" (change) = "onType('SocBuildingName')">
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-6">
              <mat-form-field class="home-full-width">
                <textarea name="Address1" oninput="this.value = this.value.toUpperCase()" (change) = "onType('Address1')" formControlName="Address1" matInput placeholder="Address Line 1" value="" >
                             </textarea>
              </mat-form-field>
            </div>
            <div class="col-sm-6">
              <mat-form-field class="home-full-width">
                <textarea name="Address2" oninput="this.value = this.value.toUpperCase()" (change) = "onType('Address2')"   formControlName="Address2" matInput placeholder="Address Line 2"
                  value=""></textarea>
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-4">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" name="Area" (change) = "onType('Area')" formControlName="Area" matInput placeholder="Area" value="" >
              </mat-form-field>
            </div>
            <div class="col-sm-4">
              <mat-form-field class="home-full-width">

                <input oninput="this.value = this.value.toUpperCase()"  formControlName="CityVillage" placeholder="City / Village" matInput [matAutocomplete]="autoCity">
                <mat-autocomplete #autoCity="matAutocomplete">
                  <mat-option *ngFor="let city of filteredOptionsCity | async"  [value]="city">
                    {{city}}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>
            </div>
            <div class="col-sm-4">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" name="Taluko" formControlName="Taluko" matInput placeholder="Taluka" value=""
                (change) = "onType('Taluko')">
              </mat-form-field>
            </div>
          </div>


          <div class="row">
            <div class="col-sm-4">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" name="Dist" formControlName="Dist" matInput placeholder="District" value="" (change) = "onType('Dist')">
              </mat-form-field>
            </div>

            <div class="col-sm-4">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" formControlName="State" placeholder="State *"
                  aria-label="State" matInput [matAutocomplete]="auto">
                <mat-autocomplete #auto="matAutocomplete">
                  <mat-option *ngFor="let state of filteredOptionsState | async" [value]="state">
                    {{state}}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>
            </div>

            <div class="col-sm-4">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" formControlName="Country" aria-label="Country"
                  placeholder="Country" matInput [matAutocomplete]="autoCountry">
                <mat-autocomplete #autoCountry="matAutocomplete">
                  <mat-option *ngFor="let country of filteredOptionsCountry | async" [value]="country"
                    ng-init="counrty">
                    {{country}}
                  </mat-option>
                </mat-autocomplete>

              </mat-form-field>
            </div>
          </div>


          <div class="row">
            <!-- <div class="col-sm-4">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" name="Village" formControlName="Village" matInput placeholder="Village" value="">
              </mat-form-field>
            </div> -->
            <div class="col-sm-4">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" name="PinCode" formControlName="PinCode" matInput
                  placeholder="PIN Code" value="">
                <mat-error
                  *ngIf="formSubmission.controls['PinCode'].invalid && (formSubmission.controls['PinCode'].dirty
                                                                               || formSubmission.controls['PinCode'].touched)">
                  Please enter valid PIN.
                </mat-error>
                <mat-error *ngIf="formSubmission.controls['PinCode'].errors?.required">
                  Valid PIN is <strong>required</strong>
                </mat-error>
              </mat-form-field>
            </div>


          </div>

          <div class="row">
            <div class="col-sm-4">
              <mat-form-field class="home-full-width">
                <input name="MobileNo" formControlName="MobileNo" matInput placeholder="Mobile" value="">
                <mat-error *ngIf="formSubmission.controls['MobileNo'].invalid 
                  && (formSubmission.controls['MobileNo'].dirty || formSubmission.controls['AdharCard'].touched)">
                  Please enter a valid Mobile Number
                </mat-error>
                <mat-error *ngIf="formSubmission.controls['MobileNo'].errors?.required">
                  Mobile Number is <strong>required</strong>
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-sm-4">
              <mat-form-field class="home-full-width">
                <input name="PhoneNo" formControlName="PhoneNo" matInput placeholder="Phone" value="">
              </mat-form-field>
            </div>
            <div class="col-sm-4">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" name="Email" formControlName="Email" matInput
                  placeholder="Email" value="">
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-4">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" name="Reference" formControlName="Reference"
                  matInput placeholder="Reference Name" value="">
              </mat-form-field>
            </div>
            <div class="col-sm-4">
              <mat-form-field class="home-full-width">
                <input oninput="this.value = this.value.toUpperCase()" name="PanCard" formControlName="PanCard" matInput
                  placeholder="PAN Number" value="">
                <mat-error
                  *ngIf="formSubmission.controls['PanCard'].invalid && (formSubmission.controls['PanCard'].dirty
                                                                               || formSubmission.controls['PanCard'].touched)">
                  Please enter valid PanCard.
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-sm-4">
              <mat-form-field class="home-full-width">
                <input name="AdharCard" formControlName="AdharCard" matInput placeholder="Aadhaar Number" value="">
                <mat-error
                  *ngIf="formSubmission.controls['AdharCard'].invalid && (formSubmission.controls['AdharCard'].dirty
                                                                             || formSubmission.controls['AdharCard'].touched)">
                  Please enter valid AdharCard.
                </mat-error>
              </mat-form-field>
            </div>
          </div>

        </div>
        <mat-card-actions style="margin-left: 10px;">
          <div class="row">
            <div class="col-md-2">
              <button type="submit" [disabled]="IsWait" mat-flat-button color="primary">Submit</button>
            </div>
            <div class="col-md-2">
              <mat-progress-spinner *ngIf="IsWait" mode="indeterminate" color="warn" diameter="50">
              </mat-progress-spinner>
            </div>
            <div class="col-sm-4">
              <mat-checkbox id="IsArchive" name="IsArchive" formControlName="IsArchive">Is Archive</mat-checkbox>
            </div>
          </div>
        </mat-card-actions>
      </mat-card-content>
    </form>
  </div>


  <div class="mat-elevation-z8">
    <mat-card-content>
      <mat-toolbar class="home-table-css" style="color: #FFFFFF; background: #EA3323;">
        <mat-toolbar-row>
          <div style="display: inline-block; width: 100%;">
            <span style="float: left;">Donor's Donations</span>
            <button mat-flat-button color="primary" (click)="openDialog()" style="float: right;" *ngIf="IsNewUser">Add
              New
              Donnation</button>
            <span style="float: right; margin-right: 10px;">
              <input oninput="this.value = this.value.toUpperCase()" matInput (keyup)="applyFilter($event.target.value)"
                class="rcorners2 inputText" type="text" style="font-size: 16px;  background: white; color: black;"
                placeholder="Search">
            </span>
          </div>
        </mat-toolbar-row>
      </mat-toolbar>

      <table mat-table [dataSource]="dataSourceDonation" matSort>

        <!-- DonationDate Column -->
        <ng-container matColumnDef="donationDate">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="home-table-th"> DonationDate </th>
          <td mat-cell *matCellDef="let element"> {{element.donationDate | date: 'dd/MM/yyyy'}} </td>
        </ng-container>

        <!-- DonationDetailID Column -->
        <ng-container matColumnDef="donationDetailID">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="home-table-th"> DonationID </th>
          <td mat-cell *matCellDef="let element"> {{element.donationDetailID}} </td>
        </ng-container>



        <!-- ReferenceNo Column -->
        <ng-container matColumnDef="referenceNo">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="home-table-th"> ReferenceNo </th>
          <td mat-cell *matCellDef="let element"> {{element.referenceNo}} </td>
        </ng-container>

        <!-- Amount Column -->
        <ng-container matColumnDef="amount">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="home-table-th"> Amount </th>
          <td mat-cell *matCellDef="let element"> {{element.amount}} </td>
        </ng-container>


        <!-- PaymentMode Column -->
        <ng-container matColumnDef="paymentMode">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="home-table-th"> PaymentMode </th>
          <td mat-cell *matCellDef="let element"> {{element.paymentMode}} </td>
        </ng-container>


        <!-- DonationType Column -->
        <ng-container matColumnDef="donationType">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="home-table-th"> DonationType </th>
          <td mat-cell *matCellDef="let element"> {{element.donationType}} </td>
        </ng-container>

        <!-- DonationBy Column -->
        <ng-container matColumnDef="donationBy">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="home-table-th"> DonationBy </th>
          <td mat-cell *matCellDef="let element"> {{element.donationBy}} </td>
        </ng-container>

        <!-- Remarks Column -->
        <ng-container matColumnDef="remarks">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="home-table-th"> Remarks </th>
          <td mat-cell *matCellDef="let element"> {{element.remarks}} </td>
        </ng-container>

        <!-- Action Column -->
        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="home-table-th"> Action </th>
          <td mat-cell *matCellDef="let element" class="home-table-td">
            <!-- <button mat-stroked-button (click)="deleteDonation(element)" color="warn">Delete</button> -->
            <img mat-card-image class="home-edit-icon-image-1" style="margin-top: 3px;" src="./assets/icon_edit.png" alt="icon_of_edit" 
            (click)="editDonation(element)">
            <img mat-card-image class="home-delete-icon-image-2" style="margin-top: 10px;" src="./assets/icon_delete.png" alt="icon_of_delete"
              (click)="deleteDonation(element)">
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumnsDonation; sticky:true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsDonation;"></tr>
      </table>
      <mat-paginator [pageSizeOptions]="[5, 10, 20, 50]" showFirstLastButtons></mat-paginator>
    </mat-card-content>
  </div>

</mat-card>

<!-- {{formSubmission.value | json}} -->